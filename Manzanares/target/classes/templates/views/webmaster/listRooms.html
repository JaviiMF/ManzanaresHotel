<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="plantillas/template :: head">
</head>
<body>

<meta charset="UTF-8">
<header th:replace="~{plantillas/template :: header}"></header>
<div class="container pt-4">
    <h1>Listado de Usuarios</h1>
    <h2>En esta página puedes acceder a todos los datos sobre los usuarios y sus roles.</h2>
</div>

<div class="container pt-4">
    <div class="row mt-3">
        <div class="row mt-3">
            <div class="col">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>Número</th>
                        <th>Disponibilidad</th>
                        <th>Extras</th>
                        <th>Disponibles</th>
                    </tr>
                    </thead>
                    <tbody id="tabla-body">
                    </tbody>
                </table>

            </div>
        </div>
    </div>
</div>

<script>
    // Realizar la solicitud GET a la API de backend
    fetch('http://localhost:8081/room/disponibles')
        .then(response => response.json())
        .then(data => {
            // Manipular los datos recibidos y construir la tabla
            const tablaBody = document.getElementById('tabla-body');

            data.forEach(habitacion => {
                const fila = document.createElement('tr');

                const numero = document.createElement('td');
                numero.textContent = habitacion.numero;
                fila.appendChild(numero);

                const disponibilidad = document.createElement('td');
                disponibilidad.textContent = habitacion.disponibilidad;
                fila.appendChild(disponibilidad);

                const extras = document.createElement('td');
                extras.textContent = habitacion.extras;
                fila.appendChild(extras);

                const nif = document.createElement('td');
                nif.textContent = habitacion.nif;
                fila.appendChild(nif);

                // Botones
                const botonBloquear = document.createElement('button');
                botonBloquear.textContent = 'Bloquear';
                botonBloquear.addEventListener('click', () => {
                    // Lógica para editar el usuario (puedes implementar tu propia lógica aquí)
                    console.log('Bloqeuar usuario:', usuario);

                });

                const celdaBloquear = document.createElement('td');
                celdaEditar.appendChild(botonEditar);
                fila.appendChild(celdaEditar);

                // Botones
                const botonEditar = document.createElement('button');
                botonEditar.textContent = 'Editar';
                botonEditar.addEventListener('click', () => {
                    // Lógica para editar el usuario (puedes implementar tu propia lógica aquí)
                    console.log('Editar usuario:', usuario);

                });

                const celdaEditar = document.createElement('td');
                celdaEditar.appendChild(botonEditar);
                fila.appendChild(celdaEditar);

                const botonEliminar = document.createElement('button');
                botonEliminar.textContent = 'Eliminar';
                botonEliminar.addEventListener('click', () => {
                    // Lógica para eliminar el usuario (puedes implementar tu propia lógica aquí)
                    console.log('Eliminar usuario:', usuario);

                });

                const celdaEliminar = document.createElement('td');
                celdaEliminar.appendChild(botonEliminar);
                fila.appendChild(celdaEliminar);

                // Agregar fila a la tabla
                tablaBody.appendChild(fila);

                tablaBody.appendChild(fila);
            });
        })
        .catch(error => {
            console.error('Error al obtener los datos:', error);
        });
</script>

<footer th:replace="~{plantillas/template :: footer}"></footer>
</body>
</html>